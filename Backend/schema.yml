openapi: 3.0.3
info:
  title: Sport Club Management API
  version: 1.0.0
  description: API documentation for Sport Club Management System - Manage members,
    activities, and enrollments
paths:
  /activities/:
    get:
      operationId: activities_retrieve
      description: 'GET: Retrieve all activities with optional search and sort. POST:
        Create a new activity (supports JSON or form-data with file upload).'
      summary: List or Create Activities
      parameters:
      - in: query
        name: search
        schema:
          type: string
        description: Search activities by name (nom_act)
      - in: query
        name: sort
        schema:
          type: string
          enum:
          - -capacite
          - capacite
        description: Sort activities by capacity ("capacite" for ascending, "-capacite"
          for descending)
      tags:
      - Activities
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: List of activities or newly created activity
        '400':
          description: Invalid JSON data
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
    post:
      operationId: activities_create
      description: 'GET: Retrieve all activities with optional search and sort. POST:
        Create a new activity (supports JSON or form-data with file upload).'
      summary: List or Create Activities
      parameters:
      - in: query
        name: search
        schema:
          type: string
        description: Search activities by name (nom_act)
      - in: query
        name: sort
        schema:
          type: string
          enum:
          - -capacite
          - capacite
        description: Sort activities by capacity ("capacite" for ascending, "-capacite"
          for descending)
      tags:
      - Activities
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                code_act:
                  type: string
                  example: ACT001
                nom_act:
                  type: string
                  example: Yoga
                tarif_mensuel:
                  type: number
                  format: float
                  example: 50.0
                capacite:
                  type: integer
                  example: 20
              required:
              - code_act
              - nom_act
              - tarif_mensuel
              - capacite
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: List of activities or newly created activity
        '400':
          description: Invalid JSON data
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
  /activities/{activity_id}/:
    get:
      operationId: activities_retrieve_2
      description: 'GET: Retrieve activity details. PUT: Update activity information
        (supports JSON or form-data with file upload). DELETE: Remove activity.'
      summary: Get, Update, or Delete Activity
      parameters:
      - in: path
        name: activity_id
        schema:
          type: integer
        required: true
      tags:
      - Activities
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Activity details or success confirmation
        '404':
          description: Activity not found
        '400':
          description: Invalid JSON data
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
    put:
      operationId: activities_update
      description: 'GET: Retrieve activity details. PUT: Update activity information
        (supports JSON or form-data with file upload). DELETE: Remove activity.'
      summary: Get, Update, or Delete Activity
      parameters:
      - in: path
        name: activity_id
        schema:
          type: integer
        required: true
      tags:
      - Activities
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                code_act:
                  type: string
                  example: ACT001
                nom_act:
                  type: string
                  example: Yoga Advanced
                tarif_mensuel:
                  type: number
                  format: float
                  example: 60.0
                capacite:
                  type: integer
                  example: 25
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Activity details or success confirmation
        '404':
          description: Activity not found
        '400':
          description: Invalid JSON data
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
    delete:
      operationId: activities_destroy
      description: 'GET: Retrieve activity details. PUT: Update activity information
        (supports JSON or form-data with file upload). DELETE: Remove activity.'
      summary: Get, Update, or Delete Activity
      parameters:
      - in: path
        name: activity_id
        schema:
          type: integer
        required: true
      tags:
      - Activities
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Activity details or success confirmation
        '404':
          description: Activity not found
        '400':
          description: Invalid JSON data
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
  /auth/login/:
    post:
      operationId: auth_login_create
      description: Login endpoint for admin users. Returns JWT tokens and user information.
        This is a legacy endpoint - prefer using /auth/token/ for JWT authentication.
      summary: Admin Login (Legacy)
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  example: admin
                password:
                  type: string
                  example: password123
              required:
              - username
              - password
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      - {}
      responses:
        '200':
          description: Login successful
        '401':
          description: Invalid credentials or not an admin
  /auth/logout/:
    get:
      operationId: auth_logout_retrieve
      description: Logout endpoint - invalidates the current session. Works with session
        authentication.
      summary: Admin Logout
      tags:
      - Authentication
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      - {}
      responses:
        '200':
          description: Logout successful
    post:
      operationId: auth_logout_create
      description: Logout endpoint - invalidates the current session. Works with session
        authentication.
      summary: Admin Logout
      tags:
      - Authentication
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      - {}
      responses:
        '200':
          description: Logout successful
  /auth/me/:
    get:
      operationId: auth_me_retrieve
      description: Returns the current authenticated user's information. Requires
        authentication token.
      summary: Get Current User
      tags:
      - Authentication
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: User information
        '401':
          description: Unauthorized - Authentication credentials not provided
  /auth/token/:
    post:
      operationId: auth_token_create
      description: |-
        Takes a set of user credentials and returns an access and refresh JSON web
        token pair to prove the authentication of those credentials.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenObtainPairRequest'
        required: true
      security:
      - bearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenObtainPair'
          description: ''
  /auth/token/refresh/:
    post:
      operationId: auth_token_refresh_create
      description: |-
        Takes a refresh type JSON web token and returns an access type JSON web
        token if the refresh token is valid.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
        required: true
      security:
      - bearerAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefresh'
          description: ''
  /enrollments/:
    get:
      operationId: enrollments_retrieve
      description: 'GET: Retrieve all enrollments with member and activity details.
        POST: Create a new enrollment (checks for duplicates and capacity).'
      summary: List or Create Enrollments
      tags:
      - Enrollments
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: List of enrollments or newly created enrollment
        '400':
          description: Bad request - Member already enrolled or activity is full
        '404':
          description: Member or Activity not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
    post:
      operationId: enrollments_create
      description: 'GET: Retrieve all enrollments with member and activity details.
        POST: Create a new enrollment (checks for duplicates and capacity).'
      summary: List or Create Enrollments
      tags:
      - Enrollments
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                membre_id:
                  type: integer
                  example: 1
                activite_id:
                  type: integer
                  example: 1
              required:
              - membre_id
              - activite_id
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: List of enrollments or newly created enrollment
        '400':
          description: Bad request - Member already enrolled or activity is full
        '404':
          description: Member or Activity not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
  /enrollments/{enrollment_id}/:
    get:
      operationId: enrollments_retrieve_2
      description: 'GET: Retrieve enrollment details. PUT: Update enrollment (change
        member or activity, validates capacity). DELETE: Remove enrollment.'
      summary: Get, Update, or Delete Enrollment
      parameters:
      - in: path
        name: enrollment_id
        schema:
          type: integer
        required: true
      tags:
      - Enrollments
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Enrollment details or success confirmation
        '404':
          description: Enrollment, Member, or Activity not found
        '400':
          description: Activity is full
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
    put:
      operationId: enrollments_update
      description: 'GET: Retrieve enrollment details. PUT: Update enrollment (change
        member or activity, validates capacity). DELETE: Remove enrollment.'
      summary: Get, Update, or Delete Enrollment
      parameters:
      - in: path
        name: enrollment_id
        schema:
          type: integer
        required: true
      tags:
      - Enrollments
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                membre_id:
                  type: integer
                  example: 2
                  description: Optional - Update member
                activite_id:
                  type: integer
                  example: 2
                  description: Optional - Update activity
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Enrollment details or success confirmation
        '404':
          description: Enrollment, Member, or Activity not found
        '400':
          description: Activity is full
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
    delete:
      operationId: enrollments_destroy
      description: 'GET: Retrieve enrollment details. PUT: Update enrollment (change
        member or activity, validates capacity). DELETE: Remove enrollment.'
      summary: Get, Update, or Delete Enrollment
      parameters:
      - in: path
        name: enrollment_id
        schema:
          type: integer
        required: true
      tags:
      - Enrollments
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Enrollment details or success confirmation
        '404':
          description: Enrollment, Member, or Activity not found
        '400':
          description: Activity is full
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
  /members/:
    get:
      operationId: members_retrieve
      description: 'GET: Retrieve a list of all members with optional search and sort.
        POST: Create a new member.'
      summary: List or Create Members
      parameters:
      - in: query
        name: id
        schema:
          type: integer
        description: Search member by exact ID
      - in: query
        name: search
        schema:
          type: string
        description: Search members by first name (prenom) or last name (nom)
      - in: query
        name: sort
        schema:
          type: string
          enum:
          - -age
          - age
        description: Sort members by age ("age" for ascending, "-age" for descending)
      tags:
      - Members
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: List of members or newly created member
        '401':
          description: Unauthorized - Authentication required
        '403':
          description: Forbidden - Admin privileges required
    post:
      operationId: members_create
      description: 'GET: Retrieve a list of all members with optional search and sort.
        POST: Create a new member.'
      summary: List or Create Members
      parameters:
      - in: query
        name: id
        schema:
          type: integer
        description: Search member by exact ID
      - in: query
        name: search
        schema:
          type: string
        description: Search members by first name (prenom) or last name (nom)
      - in: query
        name: sort
        schema:
          type: string
          enum:
          - -age
          - age
        description: Sort members by age ("age" for ascending, "-age" for descending)
      tags:
      - Members
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                nom:
                  type: string
                  example: Dupont
                prenom:
                  type: string
                  example: Jean
                age:
                  type: integer
                  example: 25
                telephone:
                  type: string
                  example: '12345678'
                  description: Must be exactly 8 digits
              required:
              - nom
              - prenom
              - age
              - telephone
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: List of members or newly created member
        '401':
          description: Unauthorized - Authentication required
        '403':
          description: Forbidden - Admin privileges required
  /members/{member_id}/:
    get:
      operationId: members_retrieve_2
      description: 'GET: Retrieve member details. PUT: Update member information.
        DELETE: Remove member.'
      summary: Get, Update, or Delete Member
      parameters:
      - in: path
        name: member_id
        schema:
          type: integer
        required: true
      tags:
      - Members
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Member details or success confirmation
        '404':
          description: Member not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
    put:
      operationId: members_update
      description: 'GET: Retrieve member details. PUT: Update member information.
        DELETE: Remove member.'
      summary: Get, Update, or Delete Member
      parameters:
      - in: path
        name: member_id
        schema:
          type: integer
        required: true
      tags:
      - Members
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                nom:
                  type: string
                  example: Dupont
                prenom:
                  type: string
                  example: Jean
                age:
                  type: integer
                  example: 26
                telephone:
                  type: string
                  example: '12345678'
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Member details or success confirmation
        '404':
          description: Member not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
    delete:
      operationId: members_destroy
      description: 'GET: Retrieve member details. PUT: Update member information.
        DELETE: Remove member.'
      summary: Get, Update, or Delete Member
      parameters:
      - in: path
        name: member_id
        schema:
          type: integer
        required: true
      tags:
      - Members
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Member details or success confirmation
        '404':
          description: Member not found
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
  /stats/:
    get:
      operationId: stats_retrieve
      description: Get an overview of club statistics including total members, most
        popular activity, and least popular activity.
      summary: Statistics Overview
      tags:
      - Statistics
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Statistics overview
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
  /stats/activities/:
    get:
      operationId: stats_activities_retrieve
      description: Get detailed statistics for each activity including enrollments,
        capacity, and available spots.
      summary: Detailed Activity Statistics
      tags:
      - Statistics
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Detailed activity statistics
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
  /stats/members-per-activity/:
    get:
      operationId: stats_members_per_activity_retrieve
      description: Get a list of members grouped by activity.
      summary: Members Per Activity
      tags:
      - Statistics
      security:
      - jwtAuth: []
      - cookieAuth: []
      - bearerAuth: []
      responses:
        '200':
          description: Members grouped by activity
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Admin required
components:
  schemas:
    TokenObtainPair:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
          readOnly: true
      required:
      - access
      - refresh
    TokenObtainPairRequest:
      type: object
      properties:
        username:
          type: string
          writeOnly: true
          minLength: 1
        password:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - password
      - username
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
      required:
      - access
      - refresh
    TokenRefreshRequest:
      type: object
      properties:
        refresh:
          type: string
          minLength: 1
      required:
      - refresh
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    cookieAuth:
      type: apiKey
      in: cookie
      name: sessionid
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
